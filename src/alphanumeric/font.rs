// Copyright 2019 Alex Crawford
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

const A: u16 = 1 << 2;
const B: u16 = 1 << 1;
const C: u16 = 1 << 3;
const D: u16 = 1 << 0;
const E: u16 = 1 << 7;
const F: u16 = 1 << 5;
const G: u16 = 1 << 6;
const H: u16 = 1 << 11;
const I: u16 = 1 << 9;
const J: u16 = 1 << 15;
const K: u16 = 1 << 8;
const L: u16 = 1 << 14;
const M: u16 = 1 << 13;
const N: u16 = 1 << 10;
const O: u16 = 1 << 12;

#[rustfmt::skip]
macro_rules! glyph {
    ("     ", $r2:tt, $r3:tt, $r4:tt, $r5:tt) => { glyph!($r2, $r3, $r4, $r5) };
    (" ─── ", $r2:tt, $r3:tt, $r4:tt, $r5:tt) => { glyph!($r2, $r3, $r4, $r5) | A };

    ("     ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) };
    ("    │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | I };
    ("   ╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | H };
    ("   ╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | H | I };
    ("  │  ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | D };
    ("  │ │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | D | I };
    ("  │╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | H | D };
    ("  │╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | D | H | I };
    (" ╲   ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C };
    (" ╲  │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C | I };
    (" ╲ ╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C | H };
    (" ╲ ╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C | H | I };
    (" ╲│  ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C | D };
    (" ╲│ │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C | D | I };
    (" ╲│╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C | H | D };
    (" ╲│╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | C | H | D | I };
    ("│    ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B };
    ("│   │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | I };
    ("│  ╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | H };
    ("│  ╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | H | I };
    ("│ │  ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | D };
    ("│ │ │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | D | I };
    ("│ │╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | D | H };
    ("│ │╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | D | H | I };
    ("│╲   ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C };
    ("│╲  │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C | I };
    ("│╲ ╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C | H };
    ("│╲ ╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C | H | I };
    ("│╲│  ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C | D };
    ("│╲│ │", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C | D | I };
    ("│╲│╱ ", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C | D | H };
    ("│╲│╱│", $r3:tt, $r4:tt, $r5:tt) => { glyph!($r3, $r4, $r5) | B | C | D | H | I };

    ("     ", $r4:tt, $r5:tt) => { glyph!($r4, $r5) };
    ("   ─ ", $r4:tt, $r5:tt) => { glyph!($r4, $r5) | J };
    (" ─   ", $r4:tt, $r5:tt) => { glyph!($r4, $r5) | E };
    (" ─ ─ ", $r4:tt, $r5:tt) => { glyph!($r4, $r5) | E | J };

    ("     ", $r5:tt) => { glyph!($r5) };
    ("    │", $r5:tt) => { glyph!($r5) | M };
    ("   ╲ ", $r5:tt) => { glyph!($r5) | L };
    ("   ╲│", $r5:tt) => { glyph!($r5) | L | M };
    ("  │  ", $r5:tt) => { glyph!($r5) | K };
    ("  │ │", $r5:tt) => { glyph!($r5) | K | M };
    ("  │╲ ", $r5:tt) => { glyph!($r5) | K | L };
    ("  │╲│", $r5:tt) => { glyph!($r5) | K | L | M };
    (" ╱   ", $r5:tt) => { glyph!($r5) | G };
    (" ╱  │", $r5:tt) => { glyph!($r5) | G | M };
    (" ╱ ╲ ", $r5:tt) => { glyph!($r5) | G | L };
    (" ╱ ╲│", $r5:tt) => { glyph!($r5) | G | L | M };
    (" ╱│  ", $r5:tt) => { glyph!($r5) | G | K };
    (" ╱│ │", $r5:tt) => { glyph!($r5) | G | K | M };
    (" ╱│╲ ", $r5:tt) => { glyph!($r5) | G | K | L };
    (" ╱│╲│", $r5:tt) => { glyph!($r5) | G | K | L | M };
    ("│    ", $r5:tt) => { glyph!($r5) | F };
    ("│   │", $r5:tt) => { glyph!($r5) | F | M };
    ("│  ╲ ", $r5:tt) => { glyph!($r5) | F | L };
    ("│  ╲│", $r5:tt) => { glyph!($r5) | F | L | M };
    ("│ │  ", $r5:tt) => { glyph!($r5) | F | K };
    ("│ │ │", $r5:tt) => { glyph!($r5) | F | K | M };
    ("│ │╲ ", $r5:tt) => { glyph!($r5) | F | K | L };
    ("│ │╲│", $r5:tt) => { glyph!($r5) | F | K | L | M };
    ("│╱   ", $r5:tt) => { glyph!($r5) | F | G };
    ("│╱  │", $r5:tt) => { glyph!($r5) | F | G | M };
    ("│╱ ╲ ", $r5:tt) => { glyph!($r5) | F | G | L };
    ("│╱ ╲│", $r5:tt) => { glyph!($r5) | F | G | L | M };
    ("│╱│  ", $r5:tt) => { glyph!($r5) | F | G | K };
    ("│╱│ │", $r5:tt) => { glyph!($r5) | F | G | K | M };
    ("│╱│╲ ", $r5:tt) => { glyph!($r5) | F | G | K | L };
    ("│╱│╲│", $r5:tt) => { glyph!($r5) | F | G | K | L | M };

    ("     ") => { 0 };
    ("    .") => { O };
    (" ─── ") => { N };
    (" ───.") => { N | O };
}

#[rustfmt::skip]
pub const MAP: [u16; 128] = [
    glyph!("     ",
           "     ",
           "     ",
           "     ",
           "     "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!("     ",
           "     ",
           "     ",
           "     ",
           "     "),
    glyph!("     ",
           "    │",
           "     ",
           "     ",
           "    ."),
    glyph!("     ",
           "  │ │",
           "     ",
           "     ",
           "     "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│ │  ",
           " ─ ─ ",
           "  │ │",
           " ─── "),
    glyph!("     ",
           "│  ╱ ",
           "     ",
           " ╱  │",
           "     "),
    glyph!(" ─── ",
           " ╲ ╱ ",
           " ─   ",
           "│  ╲│",
           " ─── "),
    glyph!("     ",
           "    │",
           "     ",
           "     ",
           "     "),
    glyph!("     ",
           "   ╱ ",
           "     ",
           "   ╲ ",
           "     "),
    glyph!("     ",
           " ╲   ",
           "     ",
           " ╱   ",
           "     "),
    glyph!("     ",
           " ╲│╱ ",
           " ─ ─ ",
           " ╱│╲ ",
           "     "),
    glyph!("     ",
           "  │  ",
           " ─ ─ ",
           "  │  ",
           "     "),
    glyph!("     ",
           "     ",
           "     ",
           " ╱   ",
           "     "),
    glyph!("     ",
           "     ",
           " ─ ─ ",
           "     ",
           "     "),
    glyph!("     ",
           "     ",
           "     ",
           "     ",
           "    ."),
    glyph!("     ",
           "   ╱ ",
           "     ",
           " ╱   ",
           "     "),
    glyph!(" ─── ",
           "│   │",
           "     ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "   ╱│",
           "     ",
           "    │",
           "     "),
    glyph!(" ─── ",
           "    │",
           " ─ ─ ",
           "│    ",
           " ─── "),
    glyph!(" ─── ",
           "    │",
           "   ─ ",
           "    │",
           " ─── "),
    glyph!("     ",
           "│   │",
           " ─ ─ ",
           "    │",
           "     "),
    glyph!(" ─── ",
           "│    ",
           " ─ ─ ",
           "    │",
           " ─── "),
    glyph!("     ",
           "│    ",
           " ─ ─ ",
           "│   │",
           " ─── "),
    glyph!(" ─── ",
           "   ╱ ",
           "     ",
           " ╱   ",
           "     "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "│   │",
           " ─── "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "    │",
           "     "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!("     ",
           "   ╱ ",
           "     ",
           "   ╲ ",
           "     "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!("     ",
           " ╲   ",
           "     ",
           " ╱   ",
           "     "),
    glyph!(" ─── ",
           "    │",
           "   ─ ",
           "  │  ",
           "     "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "│   │",
           "     "),
    glyph!(" ─── ",
           "  │ │",
           "   ─ ",
           "  │ │",
           " ─── "),
    glyph!(" ─── ",
           "│    ",
           "     ",
           "│    ",
           " ─── "),
    glyph!(" ─── ",
           "  │ │",
           "     ",
           "  │ │",
           " ─── "),
    glyph!(" ─── ",
           "│    ",
           " ─ ─ ",
           "│    ",
           " ─── "),
    glyph!(" ─── ",
           "│    ",
           " ─   ",
           "│    ",
           "     "),
    glyph!(" ─── ",
           "│    ",
           "   ─ ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "│   │",
           " ─ ─ ",
           "│   │",
           "     "),
    glyph!(" ─── ",
           "  │  ",
           "     ",
           "  │  ",
           " ─── "),
    glyph!("     ",
           "    │",
           "     ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "│  ╱ ",
           " ─   ",
           "│  ╲ ",
           "     "),
    glyph!("     ",
           "│    ",
           "     ",
           "│    ",
           " ─── "),
    glyph!("     ",
           "│╲ ╱│",
           "     ",
           "│   │",
           "     "),
    glyph!("     ",
           "│╲  │",
           "     ",
           "│  ╲│",
           "     "),
    glyph!(" ─── ",
           "│   │",
           "     ",
           "│   │",
           " ─── "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "│    ",
           "     "),
    glyph!(" ─── ",
           "│   │",
           "     ",
           "│  ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "│  ╲ ",
           "     "),
    glyph!(" ─── ",
           "│    ",
           " ─ ─ ",
           "    │",
           " ─── "),
    glyph!(" ─── ",
           "  │  ",
           "     ",
           "  │  ",
           "     "),
    glyph!("     ",
           "│   │",
           "     ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "│  ╱ ",
           "     ",
           "│╱   ",
           "     "),
    glyph!("     ",
           "│   │",
           "     ",
           "│╱ ╲│",
           "     "),
    glyph!("     ",
           " ╲ ╱ ",
           "     ",
           " ╱ ╲ ",
           "     "),
    glyph!("     ",
           " ╲ ╱ ",
           "     ",
           "  │  ",
           "     "),
    glyph!(" ─── ",
           "   ╱ ",
           "     ",
           " ╱   ",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!("     ",
           " ╲   ",
           "     ",
           "   ╲ ",
           "     "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
    glyph!("     ",
           "     ",
           "     ",
           "     ",
           " ─── "),
    glyph!("     ",
           " ╲   ",
           "     ",
           "     ",
           "     "),
    glyph!("     ",
           "     ",
           " ─   ",
           "│╱│  ",
           "     "),
    glyph!("     ",
           "│    ",
           " ─ ─ ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "     ",
           " ─ ─ ",
           "│    ",
           " ─── "),
    glyph!("     ",
           "    │",
           " ─ ─ ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "     ",
           " ─   ",
           "│╱   ",
           " ─── "),
    glyph!(" ─── ",
           "│    ",
           " ─ ─ ",
           "│    ",
           "     "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "    │",
           " ─── "),
    glyph!("     ",
           "│    ",
           " ─ ─ ",
           "│   │",
           "     "),
    glyph!("     ",
           "     ",
           "     ",
           "  │  ",
           "     "),
    glyph!("     ",
           "    │",
           "     ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "│  ╱ ",
           " ─   ",
           "│  ╲ ",
           "     "),
    glyph!("     ",
           "│    ",
           "     ",
           "│    ",
           "     "),
    glyph!("     ",
           "     ",
           " ─ ─ ",
           "│ │ │",
           "     "),
    glyph!("     ",
           "     ",
           " ─ ─ ",
           "│   │",
           "     "),
    glyph!("     ",
           "     ",
           " ─ ─ ",
           "│   │",
           " ─── "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "│    ",
           "     "),
    glyph!(" ─── ",
           "│   │",
           " ─ ─ ",
           "    │",
           "     "),
    glyph!("     ",
           "     ",
           " ─   ",
           "│    ",
           "     "),
    glyph!(" ─── ",
           "│    ",
           " ─ ─ ",
           "    │",
           " ─── "),
    glyph!("     ",
           "  │  ",
           " ─ ─ ",
           "   ╲ ",
           "     "),
    glyph!("     ",
           "     ",
           "     ",
           "│   │",
           " ─── "),
    glyph!("     ",
           "     ",
           "     ",
           "│╱   ",
           "     "),
    glyph!("     ",
           "     ",
           "     ",
           "│ │ │",
           " ─── "),
    glyph!("     ",
           " ╲ ╱ ",
           "     ",
           " ╱ ╲ ",
           "     "),
    glyph!("     ",
           "│   │",
           " ─ ─ ",
           "    │",
           " ─── "),
    glyph!("     ",
           "     ",
           " ─   ",
           " ╱   ",
           " ─── "),
    glyph!("     ",
           "   ╱ ",
           " ─   ",
           "   ╲ ",
           "     "),
    glyph!("     ",
           "  │  ",
           "     ",
           "  │  ",
           "     "),
    glyph!("     ",
           " ╲   ",
           "   ─ ",
           " ╱   ",
           "     "),
    glyph!("     ",
           "    │",
           " ─ ─ ",
           "│    ",
           "     "),
    glyph!(" ─── ",
           "│╲ ╱│",
           "     ",
           "│╱ ╲│",
           " ─── "),
];
